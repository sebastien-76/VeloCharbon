{% extends 'base.html.twig' %}

{% block title %}Actualité
{% endblock %}

{% block body %}
	<h1 class="text-center my-5">{{ blog.title }}</h1>

	<div class="card w-75 mx-auto border-card">
		{% if blog.imageName %}
			<img class="card-img-top w-25 mx-auto" src="{{ vich_uploader_asset(blog,blog.imageFile) }}" alt="{{ blog.imageName }}">
		{% endif %}

		<div class="card-body">
			<h5 class="card-text text-center mb-5 py-3">
				{{ blog.content}}
			</h5>
			{% for blogComment in blog.blogComment %}
				<div class="card w-75 mx-auto my-2 d-flex flex-column">
					<div class="d-flex flex-column my-2 justify-content-start">
						<h6 class="mx-2">
							{{ blogComment.user.userName }}</h6>
						<p class="mx-2 small">
							{{ blogComment.createdAt|date('Y-m-d H:i:s') }}</p>
					</div>
					<div>
						<p class="my-1 text-center">{{ blogComment.description }}</p>
						{% if is_granted('BLOGCOMMENT_EDIT', blogComment) %}
							<div class="d-flex flex-row justify-content-end align-items-center py-2">
								<a class="mx-2" href="{{ path('app_blog_comment_edit', {'id':blogComment.id}) }}"><img src="{{ asset('../assets/images/icones/pencil-square.svg') }}" alt="edition"></a>
								{# 								<twig:ShowBlog :blogComment="blogComment"/>
								 #}
								{% include('blog_comment/_delete_form.html.twig') %}

							</div>
						{% endif %}
					</div>
				</div>
			{% endfor %}
			<div class="d-flex flex-row justify-content-evenly align-items-center">
				<a class="btn btn-app my-5 mx-2" href="{{ path('app_blog_index' )}}" class="btn btn-app">Retour aux actualités</a>
				<a class="btn btn-app my-5 mx-2" href="{{ path('app_blog_comment_add', {'blogId': blog.id} )}}" class="btn btn-app">Ajouter un commentaire</a>
			</div>
			{% if is_granted('ROLE_MOD') %}
				<div class=" d-flex flex-row justify-content-end align-items-center">
					<a class="mx-2" href="{{ path('app_admin_blog_edit', {'id':blog.id}) }}"><img src="{{ asset('../assets/images/icones/pencil-square.svg') }}" alt="edition"></a>
					{{ include('/Administration/blog/_delete_form.html.twig') }}
				</div>
			{% endif %}
		</div>
	</div>

{% endblock %}
